{% extends 'roost_app/base.html' %}
{% block content %}
<div class="max-w-2xl mx-auto">
  <p class="section-label">Get started</p>
  <h2 class="section-title mt-1 text-slate-900">Onboarding</h2>
  <p class="section-desc">Create your profile in under 2 minutes. We'll show your Ladder Snapshot right after.</p>
  <div class="mt-2 flex gap-2">
    <span class="h-1 flex-1 rounded-full bg-roost-200"></span>
    <span class="h-1 flex-1 rounded-full bg-slate-200"></span>
    <span class="h-1 flex-1 rounded-full bg-slate-200"></span>
    <span class="h-1 flex-1 rounded-full bg-slate-200"></span>
  </div>
  <form method="post" class="mt-10 space-y-8">
    {% csrf_token %}
    <div class="card space-y-6">
      <h3 class="font-display font-semibold text-slate-900">Rent & savings</h3>
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-2">Monthly rent (CAD)</label>
        {{ form.past_avg_rent }}
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-2">Savings</label>
        <div class="flex gap-6 mb-3">{{ form.savings_type }}</div>
        <div id="savings-cad">{{ form.savings_cad }}</div>
        <div id="savings-pct" class="hidden">{{ form.savings_pct }} %</div>
      </div>
    </div>
    <div class="card space-y-6">
      <h3 class="font-display font-semibold text-slate-900">Commute & household</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Max commute (min)</label>
          {{ form.commute_tolerance_mins }}
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Household size</label>
          {{ form.preferred_household_size }}
        </div>
      </div>
    </div>
    <div class="card space-y-6">
      <h3 class="font-display font-semibold text-slate-900">Lifestyle & budget</h3>
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-3">Preferences</label>
        <div class="flex flex-wrap gap-x-6 gap-y-3">
          <label class="flex items-center gap-2 cursor-pointer">{{ form.quiet_hours }} Quiet hours</label>
          <label class="flex items-center gap-2 cursor-pointer">{{ form.pets_ok }} Pets OK</label>
          <label class="flex items-center gap-2 cursor-pointer">{{ form.smoking_ok }} Smoking OK</label>
          <label class="flex items-center gap-2 cursor-pointer">{{ form.guests_ok }} Guests OK</label>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Budget min (CAD)</label>
          {{ form.budget_min }}
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Budget max (CAD)</label>
          {{ form.budget_max }}
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-2">Display name (optional)</label>
        {{ form.display_name }}
      </div>
    </div>
    <button type="submit" class="btn-primary w-full sm:w-auto text-base px-10 py-4">Create profile & see Ladder Snapshot</button>
  </form>
</div>
<script>
  document.querySelectorAll('input[name="savings_type"]').forEach(function(r) {
    r.addEventListener('change', function() {
      var isCad = document.querySelector('input[name="savings_type"]:checked').value === 'cad';
      document.getElementById('savings-cad').classList.toggle('hidden', !isCad);
      document.getElementById('savings-pct').classList.toggle('hidden', isCad);
    });
  });
</script>
{% endblock %}
